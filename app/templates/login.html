<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>登录</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css" />
    <link rel="icon" href="/static/images/favicon.ico">
    <style>
    body {
      background-color: #DADADA;
    }
    body > .grid {
      height: 100%;
    }
    .form {
        margin-top: 200px;
    }
    </style>
    <script>
        /*提交数据*/
        var submit_data = function(method,url,parameter,callback){
            var request = new XMLHttpRequest()
            request.onreadystatechange = function(){
                if(request.readyState == XMLHttpRequest.DONE && request.status == 200){
                    callback(request.responseText)
                }
            }
            request.open(method,url,true)
            request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')
            request.send(parameter)
        }
    </script>
</head>
<body>
    <div class="ui middle aligned center aligned grid"> 
        <form action="" class="ui form">
            <div class="ui segment">
                <div class="field">
                    <div class="ui left icon input">
                        <i class="user icon"></i>
                        <input type="text" name="username" id="username" placeholder="Username">
                    </div>
                </div>
                <div class="field">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        <input type="password" name="password" id="password" placeholder="Password">
                    </div>
                </div>
                <div class="ui fluid large teal submit button" onclick="submit()">Login</div>
            </div>
        </form>
    </div>
   
</body>
<script>
    var refresh = function(data){
        var data = JSON.parse(data)
        if(data['status'] == 'success'){
            window.location.href = '/'
        }
    }
    var submit = function(){
        var username = document.getElementById('username').value
        var password = document.getElementById('password').value
        var parameter = {}
        parameter['username'] = username
        parameter['password'] = password
        var url = '/api/users/' + username
        submit_data('PUT',url,JSON.stringify(parameter),refresh)
    }

</script>
</html>